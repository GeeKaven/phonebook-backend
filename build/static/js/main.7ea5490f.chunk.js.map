{"version":3,"sources":["service/phonebook.js","components/Filter.js","components/PersonForm.js","components/Persons.js","components/Notice.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","id","delete","newPerson","post","put","Filter","value","onChange","handleFilterNameChange","PersonForm","submit","onSubmit","newName","handleNewNameChange","newNumber","handleNewNumberChange","type","Persons","persons","handle","map","person","key","name","number","onClick","handleDeletePerson","Notice","message","className","App","useState","setPersons","setNewName","setNewNumber","filterName","setFilterName","notice","setNotice","useEffect","phonebookService","initPhonebook","filterPersons","trim","length","filter","toLowerCase","includes","event","target","preventDefault","findPerson","find","window","confirm","returnPerson","setTimeout","catch","err","errRes","error","concat","delPerson","console","log","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7ea5490f.chunk.js","sourcesContent":["import axios from \"axios\";\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then((response) => response.data);\n};\n\nconst deletez = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then((response) => response.data);\n};\n\nconst add = (newPerson) => {\n  const request = axios.post(baseUrl, newPerson);\n  return request.then((response) => response.data);\n};\n\nconst update = (id, newPerson) => {\n  const request = axios.put(`${baseUrl}/${id}`, newPerson);\n  return request.then((response) => response.data);\n};\n\nexport default { getAll, deletez, add, update };\n","import React from \"react\";\n\nconst Filter = ({ value, onChange }) => {\n  return (\n    <div>\n      filter show with{\" \"}\n      <input value={value} onChange={onChange.handleFilterNameChange}></input>\n    </div>\n  );\n};\n\nexport default Filter;\n","import React from \"react\";\n\nconst PersonForm = ({ value, onChange, submit }) => {\n  return (\n    <form onSubmit={submit}>\n      <div>\n        name:{\" \"}\n        <input value={value.newName} onChange={onChange.handleNewNameChange} />\n      </div>\n      <div>\n        number:{\" \"}\n        <input\n          value={value.newNumber}\n          onChange={onChange.handleNewNumberChange}\n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, handle }) => {\n  return (\n    <div>\n      {persons.map((person) => (\n        <div key={person.id}>\n          {person.name} {person.number}\n          <button onClick={handle.handleDeletePerson(person)}>delete</button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Notice = ({ message, className }) => {\n  if (message === null) {\n    return null;\n  }\n  return <div className={className}> {message}</div>;\n};\n\nexport default Notice;\n","import React, { useEffect, useState } from \"react\";\nimport phonebookService from \"./service/phonebook\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Notice from \"./components/Notice\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterName, setFilterName] = useState(\"\");\n  const [notice, setNotice] = useState();\n\n  useEffect(() => {\n    phonebookService.getAll().then((initPhonebook) => {\n      setPersons(initPhonebook);\n    });\n  }, []);\n\n  const addPerson = (event) => {\n    event.preventDefault();\n\n    const findPerson = persons.find((person) => person.name === newName);\n    if (\n      findPerson &&\n      window.confirm(\n        `${findPerson.name} is already addedt to phonebook, replace the old number with a new one ?`\n      )\n    ) {\n      phonebookService\n        .update(findPerson.id, { ...findPerson, number: newNumber })\n        .then((returnPerson) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== returnPerson.id ? person : returnPerson\n            )\n          );\n          setNotice(\n            <Notice\n              message={`Updated ${returnPerson.name}`}\n              className=\"success\"\n            />\n          );\n          setTimeout(() => {\n            setNotice(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          const errRes = err.response.data;\n          setNotice(\n            <Notice\n              message={errRes.error}\n              className=\"error\"\n            />\n          );\n          setTimeout(() => {\n            setNotice(null);\n          }, 3000);\n        });\n    } else {\n      phonebookService\n        .add({ name: newName, number: newNumber })\n        .then((returnPerson) => {\n          setPersons(persons.concat(returnPerson));\n          setNotice(\n            <Notice\n              message={`Added ${returnPerson.name}`}\n              className=\"success\"\n            />\n          );\n          setTimeout(() => {\n            setNotice(null);\n          }, 3000);\n        })\n        .catch((err) => {\n          const errRes = err.response.data;\n          setNotice(\n            <Notice\n              message={errRes.error}\n              className=\"error\"\n            />\n          );\n          setTimeout(() => {\n            setNotice(null);\n          }, 3000);\n        });\n    }\n  };\n\n  const handleDeletePerson = (delPerson) => {\n    return () => {\n      if (window.confirm(`Delete ${delPerson.name} ?`)) {\n        phonebookService\n          .deletez(delPerson.id)\n          .then((response) => {\n            console.log(\"del\", response);\n            setPersons(persons.filter((person) => person.id !== delPerson.id));\n          })\n          .catch(() => {\n            setNotice(\n              <Notice\n                message={`${delPerson.name} has already been removed from server`}\n                className=\"error\"\n              />\n            );\n            setTimeout(() => {\n              setNotice(null);\n            }, 3000);\n          });\n      }\n    };\n  };\n\n  const handleNewNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNewNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterNameChange = (event) => {\n    setFilterName(event.target.value);\n  };\n\n  const filterPersons =\n    filterName.trim().length <= 0\n      ? persons\n      : persons.filter((person) =>\n          person.name.toLowerCase().includes(filterName.toLowerCase())\n        );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {notice}\n      <Filter value={filterName} onChange={{ handleFilterNameChange }} />\n      <h3>add new person</h3>\n      <PersonForm\n        submit={addPerson}\n        value={(newName, newNumber)}\n        onChange={{ handleNewNameChange, handleNewNumberChange }}\n      />\n      <h2>Numbers</h2>\n      <Persons persons={filterPersons} handle={{ handleDeletePerson }} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}